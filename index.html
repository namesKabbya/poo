<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Healthy Finance Tracker</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --bg: #0f172a;
  --card: #1e293b;
  --accent: #38bdf8;
  --text: #e5e7eb;
}

body {
  font-family: system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 20px;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

section {
  background: var(--card);
  padding: 16px;
  margin-bottom: 16px;
  border-radius: 14px;
}

button {
  background: var(--accent);
  color: #000;
  border: none;
  padding: 8px 14px;
  border-radius: 8px;
  cursor: pointer;
}

input, select {
  width: 100%;
  padding: 8px;
  margin: 6px 0;
  border-radius: 6px;
  border: none;
}

.progress {
  height: 12px;
  background: #334155;
  border-radius: 8px;
  overflow: hidden;
}

.progress span {
  display: block;
  height: 100%;
  background: #22c55e;
  width: 0%;
}

ul {
  padding-left: 18px;
}

canvas {
  max-width: 100%;
  height: 300px;
}
</style>
</head>

<body>

<h1>ðŸ’¸ Healthy Finance Tracker</h1>

<!-- WATER -->
<section>
  <h2>ðŸ’§ Water</h2>
  <p><span id="water">0</span> / 8 glasses</p>
  <div class="progress"><span id="waterBar"></span></div>
  <button onclick="drink()">Drink</button>
</section>

<!-- SAVINGS -->
<section>
  <h2>ðŸ’° Savings</h2>
  <input id="saveAmt" type="number" placeholder="Amount">
  <button onclick="save()">Add Savings</button>
  <p>Total: à§³<span id="saved">0</span></p>
</section>

<!-- EXPENSES -->
<section>
  <h2>ðŸ“Š Expenses</h2>
  <input id="expAmt" type="number" placeholder="Amount">
  <select id="cat">
    <option>Food</option>
    <option>Transport</option>
    <option>Shopping</option>
    <option>Other</option>
  </select>
  <button onclick="expense()">Add Expense</button>

  <ul id="expList"></ul>

  <canvas id="expChart"></canvas>
</section>

<script>
let water = Number(localStorage.getItem("water")) || 0;
let saved = Number(localStorage.getItem("saved")) || 0;
let expenses = JSON.parse(localStorage.getItem("expenses")) || {};
let chart = null;

// INIT
updateWater();
document.getElementById("saved").innerText = saved;
drawChart();
renderList();

function drink() {
  if (water < 8) water++;
  localStorage.setItem("water", water);
  updateWater();
}

function updateWater() {
  document.getElementById("water").innerText = water;
  document.getElementById("waterBar").style.width = (water / 8) * 100 + "%";
}

function save() {
  const amt = Number(saveAmt.value);
  if (!amt) return;
  saved += amt;
  localStorage.setItem("saved", saved);
  document.getElementById("saved").innerText = saved;
  saveAmt.value = "";
}

function expense() {
  const amt = Number(expAmt.value);
  const cat = catSelect.value;
  if (!amt) return;

  expenses[cat] = (expenses[cat] || 0) + amt;
  localStorage.setItem("expenses", JSON.stringify(expenses));

  expAmt.value = "";
  drawChart();
  renderList();
}

function renderList() {
  expList.innerHTML = "";
  for (let k in expenses) {
    expList.innerHTML += `<li>${k}: à§³${expenses[k]}</li>`;
  }
}

function drawChart() {
  if (chart) chart.destroy();

  chart = new Chart(expChart, {
    type: "pie",
    data: {
      labels: Object.keys(expenses),
      datasets: [{
        data: Object.values(expenses),
        backgroundColor: ["#f97316","#22c55e","#3b82f6","#a855f7"]
      }]
    },
    options: {
      plugins: {
        legend: { labels: { color: "#e5e7eb" } }
      }
    }
  });
}

// DAILY WATER RESET
const today = new Date().toDateString();
if (localStorage.getItem("day") !== today) {
  localStorage.setItem("day", today);
  localStorage.setItem("water", 0);
  water = 0;
  updateWater();
}
</script>

</body>
</html>
